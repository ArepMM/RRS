#include    "driver-controller.h"

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
DriverController::DriverController(QObject *parent) : Device(parent)
  , pos(0.0)
  , pos_rate(0.5)
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
DriverController::~DriverController()
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void DriverController::preStep(state_vector_t &Y, double t)
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void DriverController::ode_system(const state_vector_t &,
                                  state_vector_t &,
                                  double)
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void DriverController::load_config(CfgReader &cfg)
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void DriverController::stepKeysControl(double t, double dt)
{
    int dir = 0;

    if (getKeyState(KEY_A))
    {
        dir = 1;
    }

    if (getKeyState(KEY_D))
    {
        if (isControl())
        {
            pos = 0;
            dir = 0;
        }
        else
        {
            dir = -1;
        }
    }

    pos += pos_rate * dir * dt;

    pos = cut(pos, -1.0, 1.0);
}
