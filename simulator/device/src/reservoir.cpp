#include    "reservoir.h"

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
Reservoir::Reservoir(double volume, QObject *parent) : BrakeDevice(parent)
    , V(volume)
    , Q(0.0)
    , k_leak(0.0)
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
Reservoir::~Reservoir()
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void Reservoir::setFlow(double value)
{
    Q = value;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void Reservoir::setLeakCoeff(double coeff)
{
    k_leak = coeff;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
double Reservoir::getPressure() const
{
    return getY(0);
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void Reservoir::ode_system(const state_vector_t &Y, state_vector_t &dYdt, double t)
{
   Q_UNUSED(t)

   dYdt[0] = (Q - k_leak * Y[0]) / V;
}
