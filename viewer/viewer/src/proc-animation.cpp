#include    "proc-animation.h"

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
ProcAnimation::ProcAnimation(osg::MatrixTransform *transform)
    : transform(transform)
    , name("")
    , pos(0.0f)
    , duration(0.0f)
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
ProcAnimation::~ProcAnimation()
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void ProcAnimation::step(float t, float dt)
{
    anim_step(t, dt);
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void ProcAnimation::setName(const std::string &name)
{
    this->name = name;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
std::string ProcAnimation::getName() const
{
    return name;
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
bool ProcAnimation::load(const std::string &path)
{
    ConfigReader cfg(path);

    if (!cfg.isOpenned())
    {
        OSG_WARN << "WARNING: Animation file " + path + " is't found" << std::endl;
        return false;
    }

    return load_config(cfg);
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
bool ProcAnimation::load(ConfigReader &cfg)
{
    return load_config(cfg);
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void ProcAnimation::setPosition(float pos)
{
    this->pos = cut(pos, 0.0f, 1.0f);
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
size_t ProcAnimation::getSignalID() const
{
    return signal_id;
}
